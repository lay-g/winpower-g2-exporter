# Prometheus 配置文件
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: "winpower-monitoring"
    environment: "production"

# 抓取配置
scrape_configs:
  # WinPower G2 Exporter
  - job_name: "winpower-exporter"
    scrape_interval: 15s
    scrape_timeout: 10s
    static_configs:
      - targets: ["winpower-exporter:9090"]
        labels:
          service: "winpower-g2-exporter"

    # 指标重新标记（可选）
    metric_relabel_configs:
      # 保留所有 winpower_ 开头的指标
      - source_labels: [__name__]
        regex: "winpower_.*"
        action: keep

  # Prometheus 自身监控
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
# 告警规则文件（可选）
# rule_files:
#   - '/etc/prometheus/rules/*.yml'

# Alertmanager 配置（可选）
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093']
